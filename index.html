<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible " content="IE=edge" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Press+Start+2P"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/nes.css@latest/css/nes.min.css"
      rel="stylesheet"
    />
    <style>
      html,
      body,
      pre,
      code,
      kbd,
      samp {
        font-family: "font-family you want to use";
      }
    </style>
  </head>

  <body>
    <style>
      .content {
        margin-bottom: 40px;
      }
      .box {
        width: 90vw;
        margin: 0 auto !important;
        display: flex;
        align-items: center;
        flex-direction: column;
        position: relative;
        top: 20px;
        text-decoration: none !important;
      }
      .box .title_text {
        text-align: center;
        margin-top: 10px;
        font-size: 24px;
      }

      .input-url input {
        height: 35px;
        width: 90vw;
        overflow: hidden;
        line-height: 35px;
        border-color: #ff413a;
        margin: 0 auto;
        margin-top: 60px;
        display: block;
        border-radius: 5px;
        padding: 0 10px;
      }

      .btn_box {
        width: 90vw;
        margin: 0 auto;
        margin-top: 50px;
        display: flex;
        align-items: center;
        justify-content: space-around;
      }
      .tips {
        width: 90vw;
        margin: 0 auto;
        margin-top: 50px;
      }
      .list {
        font-size: 14px;
        margin-bottom: 10px;
      }
      .nes-list.is-disc li::before {
        top: 5px !important;
      }
      .icon-list {
        display: flex;
        align-items: center;
        flex-direction: column;
        margin-top: 20px;
      }
      .github {
        transform: scale(0.5);
      }
    </style>
    <div class="content">
      <a id="link" href="#" class="box nes-container is-rounded is-dark">
        <i class="nes-smartphone"></i>
        <p class="title_text">唤起APP</p>
      </a>
      <div class="input-url nes-field">
        <input
          type="text"
          id="inputs"
          class="nes-input"
          placeholder="请输入地址"
        />
      </div>
      <div class="btn_box">
        <button type="button" id="btns" class="nes-btn is-primary">
          保 存
        </button>
        <button type="button" id="reset" class="nes-btn is-warning">
          重 置
        </button>
        <button type="button" id="route" class="nes-btn is-error">
          保存路由
        </button>
      </div>
      <div class="tips nes-container with-title">
        <p class="title">
          <a href="JavaScript:void(0)" class="nes-badge is-icon">
            <span class="is-dark">嗨~</span>
            <span class="is-warning">说明</span>
          </a>
        </p>
        <div class="lists">
          <ul class="nes-list is-disc">
            <li class="list">
              目的：解决<span class="nes-text is-success">`APP-H5`</span
              >调试过程过于繁琐的问题，减少H5部署次数.
            </li>
            <li class="list">
              使用方式：本地项目通过<br /><span class="nes-text is-error"
                >`npm run serve:isApp`</span
              >方式运行项目后在上面输入框内输入服务地址,保存后点击`唤起APP`按钮.
            </li>
            <li class="list">
              点击<span class="nes-text is-primary">`保存路由`</span
              >可以存储输入的页面缓存.
            </li>
            <li class="list">
              注意： 该功能只能对本地服务进行<span class="nes-text is-warning"
                >`页面样式、APP_API方法`</span
              >的调试等,由于后端接口Cookie的跨域 并不能对接口进行调试.
            </li>
          </ul>
        </div>
      </div>
      <!-- github -->
      <div class="icon-list">
        <i class="nes-octocat animate github"></i>
        <a href="JavaScript:void(0)" class="nes-badge is-splited">
          <span class="is-dark">Github</span>
          <span class="is-primary">1.1.0</span>
        </a>
      </div>
    </div>
    <script type="text/javascript">
      (function getLink() {
        let inputs = document.getElementById("inputs");
        let link = localStorage.getItem("linkurl") || "";
        inputs.value = link;
        if (link && link !== "") {
          let links = document.getElementById("link");
          links.href =
            "unmgg://app.unwulian.com/redirect/h5/web?url=" +
            encodeURIComponent(inputs.value);
        }
        let btns = document.getElementById("btns");
        btns.onclick = () => {
          if (inputs.value == "") {
            alert("请输入链接！");
          } else {
            localStorage.setItem("linkurl", inputs.value);
            let link = document.getElementById("link");
            link.href =
              "unmgg://app.unwulian.com/redirect/h5/web?url=" +
              encodeURIComponent(inputs.value);
          }
        };
        let reset = document.getElementById("reset");
        reset.onclick = () => {
          let inputs = document.getElementById("inputs");
          inputs.value = "";
        };
        let route = document.getElementById("route");
        route.onclick = () => {
          if (inputs.value == "") {
            alert("请输入链接！");
          } else {
            localStorage.setItem("linkurl", inputs.value);
            let link = document.getElementById("link");
            link.href = "unmgg://app.unwulian.com/redirect/h5" + inputs.value;
          }
        };
      })();
    </script>
  </body>
</html>
